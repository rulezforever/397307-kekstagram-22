{"version":3,"sources":["webpack://kekstagram/./source/js/util.js","webpack://kekstagram/./source/js/comments.js","webpack://kekstagram/./source/js/big-picture.js","webpack://kekstagram/./source/js/picture.js","webpack://kekstagram/./source/js/slider.js","webpack://kekstagram/./source/js/effects.js","webpack://kekstagram/./source/js/scale.js","webpack://kekstagram/./source/js/api.js","webpack://kekstagram/./source/js/messages.js","webpack://kekstagram/./source/js/form-validation.js","webpack://kekstagram/./source/js/upload-picture.js","webpack://kekstagram/./source/js/filter.js","webpack://kekstagram/./source/js/main.js"],"names":["ESCAPE","showElement","elem","classList","remove","hideElement","add","onPressedKey","evt","code","callback","key","preventDefault","commentsListElement","document","querySelector","loadMoreBtnElement","showComments","hiddenComments","querySelectorAll","Array","from","slice","forEach","item","length","bigPictureElement","bodyElement","body","commentsLoaderElement","closeBtnElement","socialCommentCountElement","commentsCountElement","updateCommentsCount","displayedComments","allComments","textContent","openBigPicture","post","likesCountElement","src","url","likes","comments","description","innerHTML","commentFragment","createDocumentFragment","comment","appendChild","el","createElement","className","img","avatar","alt","name","width","height","p","message","append","getTemplate","createComments","addEventListener","onCloseBtnClick","onEscPress","removeEventListener","picturesElement","pictureTemplateElement","content","renderPictures","posts","postFragment","pictureElement","cloneNode","renderBigPicture","element","sliderElement","valueElement","value","noUiSlider","create","range","min","max","start","step","connect","Effects","chrome","NAME","RANGE_MIN","RANGE_MAX","START","STEP","UNITS","sepia","marvin","phobos","heat","none","uploadPreviewElement","effectsListElement","previewCssFilterUpdate","currentFilter","style","filter","onEffectsClick","target","matches","newEffect","updateOptions","on","values","handle","SCALE_VALUE","ResizeValue","Map","MIN","DEFAULT","MAX","scaleValueElement","scaleMinusElement","scalePlusElement","changeResizeValue","action","currentValue","parseInt","resizedValue","scaleFloat","toFixed","transform","changeScale","SERVER_URL","successMessageTemplateElement","errorMessageTemplateElement","mainElement","onSuccessCloseByEsc","onSuccessMessageClose","onErrorCloseByEsc","onErrorMessageClose","onMessageCloseByEmptyClick","renderSuccess","successMessageElement","successMessageFragment","getSuccessMessageFragment","onPopupClose","renderError","errorMessageElement","errorMessageFragment","getErrorMessageFragment","formElement","hashtagInputElement","symbolsPattern","commentElement","hashtags","trim","toLowerCase","split","setCustomValidity","some","hashtag","test","indexOf","Set","size","reportValidity","onEscPressBlock","stopPropagation","FILE_TYPES","previewElement","uploadElement","changePictureElement","cancelElement","file","files","fileName","it","endsWith","reader","FileReader","result","readAsDataURL","filterElement","filterFormElement","setDefaultPosts","array","setRandomPosts","_","shuffle","setDiscussedPosts","sort","prev","next","onSuccess","contains","activeElement","parentElement","debounce","debounceRender","id","onFilterClick","setFilter","fetch","then","response","json","catch","err","alertContainer","zIndex","position","left","top","right","padding","fontSize","textAlign","backgroundColor","setTimeout","showAlert","onFail","FormData","method","ok"],"mappings":"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","file":"main.bundle.js","sourcesContent":["/* global _:readonly */\nconst ESCAPE = ('Escape' || 'Esc');\nconst ALERT_SHOW_TIME = 5000;\n\nconst getRandom = (min, max) => Math.random() * (max - min + 1) + min;\n\nconst getRandomIntInclusive = (min, max) => {\n  if (max <= min) {\n    throw new Error('min должен быть меньше max');\n  }\n  if (max < 0 || min < 0) {\n    throw new Error('min и max должны быть больше нуля');\n  }\n  return Math.floor(getRandom(min, max));\n}\n\nconst checkLength = (str, maxLength) => str.length <= maxLength;\n\ncheckLength('hello', 5);\n\nconst getRandomArrayElement = (elements) => {\n  return elements[_.random(0, elements.length - 1)];\n}\n\nconst getRandomsFrom = (array, randomNumber) => {\n  array = array.slice();\n  const result = [];\n  const random = getRandomIntInclusive(1, randomNumber);\n  for (let i = 1; i <= random; i++) {\n    const messageNumber = getRandomIntInclusive(0, array.length - 1);\n    result.push(array[messageNumber]);\n    array.splice(messageNumber, 1);\n  }\n  return result.join(' ');\n}\n\nconst getUnicIdFrom = (array) => {\n  if (array.length !== 0) {\n    return Number(array.splice(0, 1));\n  }\n  return -1;\n}\n\nconst createElement = (template) => {\n  const newElement = document.createElement('template');\n  newElement.innerHTML = template;\n  return newElement.content.childNodes[1];\n}\n\nconst showElement = (elem) => {\n  return elem.classList.remove('hidden');\n}\n\nconst hideElement = (elem) => {\n  return elem.classList.add('hidden');\n}\n\nconst onPressedKey = (evt,code,callback) => {\n  if (evt.key === code) {\n    evt.preventDefault();\n    callback();\n  }\n};\n\nconst showAlert = (message) => {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = 100;\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = 0;\n  alertContainer.style.top = 0;\n  alertContainer.style.right = 0;\n  alertContainer.style.padding = '10px 3px';\n  alertContainer.style.fontSize = '30px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'red';\n\n  alertContainer.textContent = message;\n\n  document.body.append(alertContainer);\n\n  setTimeout(() => {\n    alertContainer.remove();\n  }, ALERT_SHOW_TIME);\n}\n\nexport { ESCAPE, showAlert, onPressedKey, showElement, hideElement, createElement, getRandom, getRandomIntInclusive, getRandomArrayElement, getRandomsFrom, getUnicIdFrom }\n","import { showElement, hideElement } from './util.js';\n\nconst COMMENT_STEP = 5;\nconst VISUALLY_HIDDEN_CLASS_NAME = 'visually-hidden';\n\nconst commentsListElement = document.querySelector('.social__comments');\nconst loadMoreBtnElement = document.querySelector('.social__comments-loader');\n\nconst createComments = (post) => {\n  commentsListElement.innerHTML = '';\n\n  const commentFragment = document.createDocumentFragment();\n  post.comments.forEach((comment) => {\n    commentFragment.appendChild(getTemplate(comment));\n  });\n  commentsListElement.appendChild(commentFragment);\n}\n\nconst getTemplate = (post) => {\n\n  const el = document.createElement('li');\n  el.className = 'social__comment visually-hidden';\n  const img = document.createElement('img');\n  img.className = 'social__picture';\n  img.src = post.avatar;\n  img.alt = post.name;\n  img.width = '35';\n  img.height = '35';\n  const p = document.createElement('p');\n  p.className = 'social__text';\n  p.innerHTML = post.message;\n  el.append(img);\n  el.append(p);\n  return el;\n}\n\nconst showComments = () => {\n  const hiddenComments = commentsListElement.querySelectorAll(`.${VISUALLY_HIDDEN_CLASS_NAME}`);\n  const hiddenCommentsArray = Array.from(hiddenComments);\n  hiddenCommentsArray.slice(0, COMMENT_STEP).forEach((item) => {\n    item.classList.remove(`${VISUALLY_HIDDEN_CLASS_NAME}`)\n  });\n  commentsListElement.querySelectorAll(`li.${VISUALLY_HIDDEN_CLASS_NAME}`).length === 0 ? hideElement(loadMoreBtnElement) : showElement(loadMoreBtnElement);\n}\n\nexport { VISUALLY_HIDDEN_CLASS_NAME, createComments, showComments };\n","import { showElement, hideElement, onPressedKey, ESCAPE } from './util.js';\nimport { createComments, showComments, VISUALLY_HIDDEN_CLASS_NAME } from './comments.js';\n\n\nconst bigPictureElement = document.querySelector('.big-picture');\nconst bodyElement = document.body;\nconst commentsLoaderElement = document.querySelector('.comments-loader');\nconst closeBtnElement = bigPictureElement.querySelector('.big-picture__cancel');\nconst socialCommentCountElement = bigPictureElement.querySelector('.social__comment-count');\nconst commentsCountElement = bigPictureElement.querySelector('.comments-count');\nconst commentsListElement = bigPictureElement.querySelector('.social__comments');\n\nconst updateCommentsCount = () => {\n  const displayedComments = commentsListElement.querySelectorAll(`li:not(.${VISUALLY_HIDDEN_CLASS_NAME})`);\n  const allComments = commentsListElement.querySelectorAll('li');\n  socialCommentCountElement.textContent = `${displayedComments.length} из ${allComments.length} комментариев`;\n}\n\nconst openBigPicture = (post) => {\n  const likesCountElement = bigPictureElement.querySelector('.likes-count');\n  bodyElement.classList.add('modal-open');\n\n  bigPictureElement.querySelector('.big-picture__img img').src = post.url;\n  likesCountElement.textContent = post.likes;\n  commentsCountElement.textContent = post.comments.length;\n  bigPictureElement.querySelector('.social__caption').textContent = post.description;\n\n  createComments(post);\n  showComments();\n  updateCommentsCount();\n  showElement(bigPictureElement);\n\n  closeBtnElement.addEventListener('click', onCloseBtnClick);\n  document.addEventListener('keydown',onEscPress);\n};\n\nconst onCloseBtnClick = () => {\n  hideElement(bigPictureElement);\n  closeBtnElement.removeEventListener('click', onCloseBtnClick);\n  bodyElement.classList.remove('modal-open');\n  document.removeEventListener('keydown',onEscPress);\n}\n\nconst onLoadMoreClick = () => {\n  showComments();\n  updateCommentsCount();\n}\n\ncommentsLoaderElement.addEventListener('click', onLoadMoreClick);\n\nconst onEscPress = (evt) => {\n  onPressedKey(evt,ESCAPE,onCloseBtnClick);\n}\n\nexport { openBigPicture, bodyElement };\n","import { openBigPicture } from './big-picture.js';\n\nconst picturesElement = document.querySelector('.pictures');\nconst pictureTemplateElement = document.querySelector('#picture').content.querySelector('.picture');\n\nconst renderBigPicture = (post) => {\n  const pictureElement = pictureTemplateElement.cloneNode(true);\n  pictureElement.querySelector('.picture__img').src = post.url;\n  pictureElement.querySelector('.picture__likes').textContent = post.likes;\n  pictureElement.querySelector('.picture__comments').textContent = post.comments.length;\n  const onPhotoClick = (evt) => {\n    evt.preventDefault();\n    openBigPicture(post);\n  }\n  pictureElement.addEventListener('click', onPhotoClick);\n  return pictureElement;\n}\nconst clearPictures = () => {\n  document.querySelectorAll('.picture').forEach(element => element.remove());\n}\n\nconst renderPictures = (posts) => {\n  const postFragment = document.createDocumentFragment();\n\n  posts.forEach((post) => {\n    postFragment.appendChild(renderBigPicture(post));\n  });\n  clearPictures();\n  picturesElement.appendChild(postFragment);\n}\n\nexport { renderPictures }\n","/* global noUiSlider:readonly */\nconst EFFECT_LEVEL_VALUE = 80;\nconst Slider = {\n  RANGE_MIN: 0,\n  RANGE_MAX: 100,\n  START: 80,\n  STEP: 1,\n}\n\nconst sliderElement = document.querySelector('.effect-level__slider');\nconst valueElement = document.querySelector('.effect-level__value');\n\nsliderElement.classList.add('visually-hidden');\nvalueElement.value = EFFECT_LEVEL_VALUE;\n\nnoUiSlider.create(sliderElement, {\n  range: {\n    min: Slider.RANGE_MIN,\n    max: Slider.RANGE_MAX,\n  },\n  start: Slider.START,\n  step: Slider.STEP,\n  connect: 'lower',\n});\n\nexport { sliderElement, valueElement }\n","import { sliderElement, valueElement } from './slider.js';\n\nconst Effects = {\n  chrome: {\n    NAME: 'chrome',\n    RANGE_MIN: 0,\n    RANGE_MAX: 1,\n    START: 1,\n    STEP: 0.1,\n    UNITS: '',\n  },\n  sepia: {\n    NAME: 'sepia',\n    RANGE_MIN: 0,\n    RANGE_MAX: 1,\n    START: 1,\n    STEP: 0.1,\n    UNITS: '',\n  },\n  marvin: {\n    NAME: 'marvin',\n    RANGE_MIN: 0,\n    RANGE_MAX: 100,\n    START: 100,\n    STEP: 1,\n    UNITS: '%',\n  },\n  phobos: {\n    NAME: 'phobos',\n    RANGE_MIN: 0,\n    RANGE_MAX: 3,\n    START: 3,\n    STEP: 0.1,\n    UNITS: 'px',\n  },\n  heat: {\n    NAME: 'heat',\n    RANGE_MIN: 1,\n    RANGE_MAX: 3,\n    START: 3,\n    STEP: 0.1,\n    UNITS: '',\n  },\n  none: {\n    NAME: 'none',\n    RANGE_MIN: 0,\n    RANGE_MAX: 1,\n    START: 1,\n    STEP: 1,\n    UNITS: '',\n  },\n};\n\nconst uploadPreviewElement = document.querySelector('.img-upload__preview');\nconst effectsListElement = document.querySelector('.effects__list');\n\nconst previewCssFilterUpdate = () => {\n  switch (currentFilter) {\n    case 'chrome':\n      uploadPreviewElement.style.filter = `grayscale(${valueElement.value})`;\n      break;\n    case 'sepia':\n      uploadPreviewElement.style.filter = `sepia(${valueElement.value})`;\n      break;\n    case 'marvin':\n      uploadPreviewElement.style.filter = `invert(${valueElement.value}${Effects.marvin.UNITS})`;\n      break;\n    case 'phobos':\n      uploadPreviewElement.style.filter = `blur(${valueElement.value}${Effects.phobos.UNITS})`;\n      break;\n    case 'heat':\n      uploadPreviewElement.style.filter = `brightness(${valueElement.value})`;\n      break;\n  }\n};\n\nlet currentFilter = '';\n\nconst getEffect = (current) => Effects[current];\n\nconst onEffectsClick = (evt) => {\n\n  if (!evt.target.matches('input[type=\"radio\"]')) return;\n\n  currentFilter = evt.target.value;\n\n  uploadPreviewElement.className = 'effects__preview--' + currentFilter;\n\n  uploadPreviewElement.classList.add('img-upload__preview');\n  sliderElement.classList.add('visually-hidden');\n  uploadPreviewElement.style.filter = 'none';\n\n  if (currentFilter !== 'none') {\n    sliderElement.classList.remove('visually-hidden');\n    uploadPreviewElement.classList.add('effects__preview--' + currentFilter);\n  }\n\n  const newEffect = getEffect(currentFilter);\n\n  previewCssFilterUpdate()\n\n  sliderElement.noUiSlider.updateOptions({\n    range: {\n      min: newEffect.RANGE_MIN,\n      max: newEffect.RANGE_MAX,\n    },\n    start: newEffect.START,\n    step: newEffect.STEP,\n  });\n}\n\nsliderElement.noUiSlider.on('update',\n  (values, handle) => {\n    valueElement.value = values[handle]\n    previewCssFilterUpdate();\n  });\n\nexport { Effects, uploadPreviewElement, effectsListElement, onEffectsClick };\n","import { uploadPreviewElement } from './effects.js';\n\nconst SCALE_VALUE = '100%';\n\nconst ResizeValue = new Map();\nResizeValue.STEP = 25;\nResizeValue.MIN = 25;\nResizeValue.DEFAULT = 100;\nResizeValue.MAX = 100;\n\nconst scaleValueElement = document.querySelector('.scale__control--value');\nconst scaleMinusElement = document.querySelector('.scale__control--smaller');\nconst scalePlusElement = document.querySelector('.scale__control--bigger');\n\nscaleValueElement.value = SCALE_VALUE;\n\nconst changeScale = (value) => {\n  scaleValueElement.value = `${value}%`;\n  const scaleFloat = (parseInt(value) / 100).toFixed(2);\n  uploadPreviewElement.style.transform = `scale(${scaleFloat})`;\n}\n\nconst changeResizeValue = (action) => {\n  const currentValue = parseInt(scaleValueElement.value);\n\n  const resizedValue = action === 'decrease' ? currentValue - ResizeValue.STEP : currentValue + ResizeValue.STEP;\n  if (resizedValue >= ResizeValue.MIN && resizedValue <= ResizeValue.MAX) {\n    changeScale(resizedValue);\n  }\n}\n\nconst onMinusBtnClick =  () => changeResizeValue('decrease');\nconst onPlusBtnClick = () => changeResizeValue('increase');\n\nscaleMinusElement.addEventListener('click', onMinusBtnClick);\nscalePlusElement.addEventListener('click', onPlusBtnClick);\n\nexport { changeScale, scaleValueElement, SCALE_VALUE}\n","import { showAlert } from './util.js';\n\nconst SERVER_URL = 'https://22.javascript.pages.academy/kekstagram';\n\nconst getData = (onSuccess) => {\n  fetch(`${SERVER_URL}/data`)\n    .then((response) => response.json())\n    .catch((err) => {\n      showAlert(err);\n    })\n    .then((posts) => {\n      onSuccess(posts);\n    });\n};\n\nconst sendData = (onSuccess, onFail, body) => {\n  fetch(\n    `${SERVER_URL}`,\n    {\n      method: 'POST',\n      body,\n    },\n  )\n    .then((response) => {\n      if (response.ok) {\n        onSuccess();\n      } else {\n        onFail();\n      }\n    })\n    .catch(() => {\n      onFail();\n    });\n};\n\nexport { getData, sendData }\n","import { onPopupClose } from './upload-picture.js';\nimport { ESCAPE, hideElement, onPressedKey } from './util.js';\n\nconst successMessageTemplateElement = document.querySelector('#success').content.querySelector('.success');\nconst errorMessageTemplateElement = document.querySelector('#error').content.querySelector('.error');\nconst mainElement = document.querySelector('main');\n\nconst getSuccessMessageFragment = () => {\n  const successMessageElement = successMessageTemplateElement.cloneNode(true);\n  const successMessageFragment = document.createDocumentFragment();\n  successMessageFragment.appendChild(successMessageElement);\n  return successMessageFragment;\n}\n\nconst getErrorMessageFragment = () => {\n  const errorMessageElement = errorMessageTemplateElement.cloneNode(true);\n  const errorMessageFragment = document.createDocumentFragment();\n  errorMessageFragment.appendChild(errorMessageElement);\n  return errorMessageFragment;\n}\n\nconst onSuccessCloseByEsc = (evt) => {\n  onPressedKey(evt,ESCAPE,onSuccessMessageClose)\n}\n\nconst onErrorCloseByEsc = (evt) => {\n  onPressedKey(evt,ESCAPE,onErrorMessageClose)\n}\n\nconst onMessageCloseByEmptyClick = (evt) => {\n  if (evt.target === document.querySelector('.success')) {\n    onSuccessMessageClose();\n  }\n  if (evt.target === document.querySelector('.error')) {\n    onErrorMessageClose();\n  }\n}\nconst onSuccessMessageClose = () => {\n  hideElement(document.querySelector('.success'));\n  document.querySelector('.success__button').removeEventListener('click', onSuccessMessageClose);\n  document.removeEventListener('keydown', onSuccessCloseByEsc);\n  document.removeEventListener('click', onMessageCloseByEmptyClick);\n}\n\nconst renderSuccess = () => {\n  mainElement.appendChild(getSuccessMessageFragment());\n  document.querySelector('.success__button').addEventListener('click', onSuccessMessageClose);\n  onPopupClose();\n  document.addEventListener('keydown', onSuccessCloseByEsc);\n  document.addEventListener('click', onMessageCloseByEmptyClick);\n}\n\nconst onErrorMessageClose = () => {\n  hideElement(document.querySelector('.error'));\n  document.querySelector('.error__button').removeEventListener('click', onErrorMessageClose);\n  document.removeEventListener('keydown', onErrorCloseByEsc);\n  document.removeEventListener('click', onMessageCloseByEmptyClick);\n}\n\nconst renderError = () => {\n  mainElement.appendChild(getErrorMessageFragment());\n  document.querySelector('.error__button').addEventListener('click', onErrorMessageClose);\n  onPopupClose();\n  document.addEventListener('keydown', onErrorCloseByEsc);\n  document.addEventListener('click', onMessageCloseByEmptyClick);\n}\n\nexport { renderSuccess, renderError }\n","import {sendData} from './api.js';\nimport { renderError, renderSuccess } from './messages.js';\n\nconst COMMENT_MAX_LENGTH = 140;\nconst Tags = {\n  MAX_LENGTH: 20,\n  MAX_COUNT: 5,\n  MIN: 2,\n  SYMBOL: '#',\n};\n\nconst formElement = document.querySelector('.img-upload__form');\nconst hashtagInputElement = formElement.querySelector('.text__hashtags');\nconst symbolsPattern = /^[0-9A-Za-zА-Яа-я]+$/;\nconst commentElement = formElement.querySelector('.text__description');\n\nconst onHashtagInput = () => {\n  const hashtags = hashtagInputElement.value.trim().toLowerCase().split(' ');\n  if (hashtags.length > Tags.MAX_COUNT) {\n    hashtagInputElement.setCustomValidity('нельзя указать больше пяти хэш-тегов');\n    return;\n  } else {\n    hashtags.some((hashtag) => {\n      if (hashtag[0] !== Tags.SYMBOL) {\n        hashtagInputElement.setCustomValidity('хэш-тег должен начинаться с символа # (решётка)');\n      } else if (hashtag.length < Tags.MIN) {\n        hashtagInputElement.setCustomValidity('хеш-тег не может состоять только из одной решётки');\n      } else if (!symbolsPattern.test(hashtag.slice(1))) {\n        hashtagInputElement.setCustomValidity('строка после решётки должна состоять из букв и чисел и не может содержать пробелы, спецсимволы (#, @, $ и т. п.), символы пунктуации (тире, дефис, запятая и т. п.), эмодзи и т. д.');\n      } else if (hashtag.length > Tags.MAX_LENGTH) {\n        hashtagInputElement.setCustomValidity(`максимальная длина одного хэш-тега ${Tags.MAX_LENGTH} символов, включая решётку`);\n      } else if (hashtag.indexOf(Tags.SYMBOL, 1) >= 1) {\n        hashtagInputElement.setCustomValidity('хэш-теги разделяются пробелами');\n      } else if (hashtags.length !== new Set(hashtags).size) {\n        hashtagInputElement.setCustomValidity('один и тот же хэш-тег не может быть использован дважды');\n      } else {\n        hashtagInputElement.setCustomValidity('');\n      }\n    });\n  }\n  hashtagInputElement.reportValidity();\n}\n\nconst onCommentInput = () => {\n  if (commentElement.value.length > COMMENT_MAX_LENGTH) {\n    commentElement.setCustomValidity('длина комментария не может составлять больше 140 символов');\n    return;\n  }\n  commentElement.setCustomValidity('');\n  commentElement.reportValidity();\n}\n\nhashtagInputElement.addEventListener('input', onHashtagInput);\ncommentElement.addEventListener('input', onCommentInput);\n\nconst onEscPressBlock = (evt) => {\n  evt.stopPropagation();\n}\n\nhashtagInputElement.addEventListener('keydown', onEscPressBlock);\ncommentElement.addEventListener('keydown', onEscPressBlock);\n\n\nconst setUploadFileFormSubmit = () => {\n  formElement.addEventListener('submit', (evt) => {\n    evt.preventDefault();\n    sendData(\n      renderSuccess,\n      renderError,\n      new FormData(evt.target),\n    );\n  });\n};\n\nexport { hashtagInputElement, commentElement, onEscPressBlock, setUploadFileFormSubmit }\n","import { showElement, hideElement, ESCAPE, onPressedKey } from './util.js';\nimport { onEffectsClick, effectsListElement, uploadPreviewElement } from './effects.js';\nimport { scaleValueElement, SCALE_VALUE } from './scale.js';\nimport { sliderElement } from './slider.js';\nimport { hashtagInputElement, commentElement, onEscPressBlock } from './form-validation.js';\nimport { bodyElement } from './big-picture.js';\n\nconst FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\nconst previewElement = document.querySelector('.img-upload__img');\nconst uploadElement = document.querySelector('#upload-file');\nconst changePictureElement = document.querySelector('.img-upload__overlay');\nconst cancelElement = document.querySelector('#upload-cancel');\n\nconst onPopupOpen = () => {\n\n  effectsListElement.addEventListener('change', onEffectsClick);\n  document.addEventListener('keydown', onEscPress);\n  cancelElement.addEventListener('click', onPopupClose);\n  showElement(changePictureElement );\n  bodyElement.classList.add('modal-open');\n  const file = uploadElement.files[0];\n  const fileName = file.name.toLowerCase();\n\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n    reader.addEventListener('load', () => {\n      previewElement.src = reader.result;\n    });\n    reader.readAsDataURL(file);\n  }\n}\n\nconst onPopupClose = () => {\n  hideElement(changePictureElement );\n  bodyElement.classList.remove('modal-open');\n  uploadElement.value = '';\n  document.removeEventListener('keydown', onEscPress);\n  cancelElement.removeEventListener('click', onPopupClose);\n  effectsListElement.removeEventListener('change', onEffectsClick);\n  hashtagInputElement.removeEventListener('keydown', onEscPressBlock);\n  commentElement.removeEventListener('keydown', onEscPressBlock);\n  uploadPreviewElement.className = 'img-upload__preview';\n  uploadPreviewElement.style.filter = 'none';\n  scaleValueElement.value = SCALE_VALUE;\n  uploadPreviewElement.style.transform = 'none';\n  sliderElement.classList.add('visually-hidden');\n  hashtagInputElement.value = '';\n  commentElement.value ='';\n}\n\nconst onEscPress = (evt) => {\n  onPressedKey(evt, ESCAPE, onPopupClose);\n}\n\nuploadElement.addEventListener('change', onPopupOpen);\n\nexport { onPopupClose }\n","/* global _:readonly */\n\nimport { renderPictures } from './picture.js';\n\nconst DELAY = 500;\nconst RANDOM_PICTURES_QUANTITY = 10;\n\nconst filterElement = document.querySelector('.img-filters');\nconst filterFormElement = document.querySelector('.img-filters__form');\n\nconst setDefaultPosts = (array) => array.slice();\nconst setRandomPosts = (array) => _.shuffle(array).slice(0, RANDOM_PICTURES_QUANTITY);\nconst setDiscussedPosts = (array) => array.slice().sort((prev, next) => next.comments.length - prev.comments.length);\n\nconst updateFilter = (array) => {\n\n  const filterTypes = {\n    'filter-default': setDefaultPosts(array),\n    'filter-random': setRandomPosts(array),\n    'filter-discussed': setDiscussedPosts(array),\n  }\n\n  return filterTypes[filterFormElement.querySelector('.img-filters__button--active').id];\n}\n\nconst onFilterClick = (evt, posts) => {\n  if (!evt.target.classList.contains('img-filters__button')) {\n    return;\n  }\n  let activeElement = evt.target.parentElement.querySelector('.img-filters__button--active');\n  if (activeElement) {\n    activeElement.classList.remove('img-filters__button--active');\n  }\n  evt.target.classList.add('img-filters__button--active');\n  const debounceRender = _.debounce(renderPictures, DELAY);\n  debounceRender(updateFilter(posts));\n}\n\nconst setFilter = (posts) => {\n  filterElement.classList.remove('img-filters--inactive');\n  filterFormElement.addEventListener('click', (evt) => {\n    onFilterClick(evt, posts);\n  });\n}\n\nexport { setFilter }\n","import './picture.js'\nimport './upload-picture.js'\nimport './slider.js'\nimport './scale.js'\nimport './form-validation.js'\nimport './messages.js'\nimport  { setFilter } from './filter.js'\nimport { getData } from'./api.js'\nimport { setUploadFileFormSubmit } from './form-validation.js';\nimport { renderPictures } from './picture.js';\n\ngetData((posts) => {\n  renderPictures(posts);\n  setFilter(posts);\n});\n\nsetUploadFileFormSubmit();\n"],"sourceRoot":""}